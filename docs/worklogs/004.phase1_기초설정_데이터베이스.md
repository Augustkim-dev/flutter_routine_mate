# 004. Phase 1: ê¸°ì´ˆ ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶• - ì‘ì—… ì™„ë£Œ

## ğŸ“‹ ì‘ì—… ìš”ì•½
- **ì‘ì—…ì¼**: 2025.10.18
- **ì‹¤ì œ ì†Œìš”ì‹œê°„**: ì•½ 4ì‹œê°„
- **ì‘ì—… ìƒíƒœ**: âœ… ì™„ë£Œ

## âœ¨ êµ¬í˜„ëœ ê¸°ëŠ¥
- [x] í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„± (Clean Architecture)
- [x] SQLite ë°ì´í„°ë² ì´ìŠ¤ í—¬í¼ í´ë˜ìŠ¤ êµ¬í˜„
- [x] ë„ë©”ì¸ ì—”í‹°í‹° ì •ì˜ (Routine, CompletionRecord, ScheduleType)
- [x] ë°ì´í„° ëª¨ë¸ í´ë˜ìŠ¤ êµ¬í˜„ (RoutineModel, CompletionRecordModel, AppSettingsModel)
- [x] Repository ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [x] Repository êµ¬í˜„ì²´ ì‘ì„±
- [x] Local DataSource êµ¬í˜„
- [x] ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ì‘ì„± (Constants, UUID Generator)
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ë° í†µê³¼

## ğŸ“ ìƒì„±ëœ íŒŒì¼ êµ¬ì¡°

```
lib/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ database_helper.dart        # SQLite ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ app_database.dart           # ë°ì´í„°ë² ì´ìŠ¤ Provider
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ constants.dart              # ì•± ì „ì²´ ìƒìˆ˜ ì •ì˜
â”‚       â””â”€â”€ uuid_generator.dart         # UUID ìƒì„± ìœ í‹¸ë¦¬í‹°
â””â”€â”€ features/
    â””â”€â”€ routine/
        â”œâ”€â”€ data/
        â”‚   â”œâ”€â”€ models/
        â”‚   â”‚   â”œâ”€â”€ routine_model.dart           # ë£¨í‹´ ë°ì´í„° ëª¨ë¸
        â”‚   â”‚   â”œâ”€â”€ completion_record_model.dart # ì™„ë£Œ ê¸°ë¡ ëª¨ë¸
        â”‚   â”‚   â””â”€â”€ app_settings_model.dart      # ì•± ì„¤ì • ëª¨ë¸
        â”‚   â”œâ”€â”€ datasources/
        â”‚   â”‚   â””â”€â”€ routine_local_datasource.dart # ë¡œì»¬ ë°ì´í„°ì†ŒìŠ¤
        â”‚   â””â”€â”€ repositories/
        â”‚       â””â”€â”€ routine_repository_impl.dart  # Repository êµ¬í˜„ì²´
        â””â”€â”€ domain/
            â”œâ”€â”€ entities/
            â”‚   â”œâ”€â”€ routine.dart              # ë£¨í‹´ ì—”í‹°í‹°
            â”‚   â”œâ”€â”€ completion_record.dart    # ì™„ë£Œ ê¸°ë¡ ì—”í‹°í‹°
            â”‚   â””â”€â”€ schedule_type.dart        # ìŠ¤ì¼€ì¤„ íƒ€ì… enum
            â””â”€â”€ repositories/
                â””â”€â”€ routine_repository.dart   # Repository ì¸í„°í˜ì´ìŠ¤
```

## ğŸ’» ì£¼ìš” êµ¬í˜„ ë‚´ìš©

### 1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
```sql
-- routines í…Œì´ë¸”
CREATE TABLE routines (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  icon_index INTEGER NOT NULL DEFAULT 0,
  color_index INTEGER NOT NULL DEFAULT 0,
  schedule_type TEXT NOT NULL DEFAULT 'daily',
  custom_days TEXT,
  sort_order INTEGER NOT NULL DEFAULT 0,
  reminder_time TEXT,
  is_reminder_enabled INTEGER NOT NULL DEFAULT 0,
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL,
  deleted_at TEXT  -- Soft delete ì§€ì›
)

-- completion_records í…Œì´ë¸”
CREATE TABLE completion_records (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  routine_id TEXT NOT NULL,
  date TEXT NOT NULL,
  is_completed INTEGER NOT NULL DEFAULT 1,
  completed_at TEXT,
  note TEXT,
  created_at TEXT NOT NULL,
  FOREIGN KEY (routine_id) REFERENCES routines(id) ON DELETE CASCADE,
  UNIQUE(routine_id, date)
)

-- app_settings í…Œì´ë¸”
CREATE TABLE app_settings (
  key TEXT PRIMARY KEY,
  value TEXT NOT NULL,
  updated_at TEXT NOT NULL
)

-- analytics_data í…Œì´ë¸”
CREATE TABLE analytics_data (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  event_name TEXT NOT NULL,
  event_data TEXT,
  created_at TEXT NOT NULL
)
```

### 2. í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
- **Clean Architecture íŒ¨í„´**: Domain, Data, Presentation ë ˆì´ì–´ ë¶„ë¦¬
- **Repository íŒ¨í„´**: ë°ì´í„° ì ‘ê·¼ ì¶”ìƒí™”
- **Soft Delete**: deleted_at í•„ë“œë¥¼ í†µí•œ ë…¼ë¦¬ì  ì‚­ì œ
- **íŠ¸ëœì­ì…˜ ì§€ì›**: ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥
- **ìŠ¤íŠ¸ë¦¼ ì§€ì›**: ì‹¤ì‹œê°„ ë°ì´í„° ë³€ê²½ ê°ì§€
- **ì™„ë£Œìœ¨ ê³„ì‚°**: ìµœê·¼ 30ì¼ ê¸°ì¤€
- **ìŠ¤íŠ¸ë¦­ ê³„ì‚°**: ì—°ì† ì™„ë£Œ ì¼ìˆ˜ ì¶”ì 
- **ë°ì´í„° ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°**: ë°±ì—… ë° ë³µì› ê¸°ëŠ¥

### 3. í…ŒìŠ¤íŠ¸ ê²°ê³¼
```
âœ… RoutineModel í…ŒìŠ¤íŠ¸ (5/5 í†µê³¼)
  - fromMap ë©”ì„œë“œê°€ ì˜¬ë°”ë¥¸ ëª¨ë¸ì„ ìƒì„±í•´ì•¼ í•¨
  - toMap ë©”ì„œë“œê°€ ì˜¬ë°”ë¥¸ Mapì„ ë°˜í™˜í•´ì•¼ í•¨
  - toEntity ë©”ì„œë“œê°€ ì˜¬ë°”ë¥¸ ë„ë©”ì¸ ì—”í‹°í‹°ë¥¼ ë°˜í™˜í•´ì•¼ í•¨
  - fromEntity ë©”ì„œë“œê°€ ì˜¬ë°”ë¥¸ ëª¨ë¸ì„ ìƒì„±í•´ì•¼ í•¨
  - copyWith ë©”ì„œë“œê°€ ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•´ì•¼ í•¨
```

## ğŸ”§ ê¸°ìˆ ì  íŠ¹ì§•

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- ë³µí•© ì¸ë±ìŠ¤ ìƒì„± (routine_id + date)
- ì‚­ì œëœ ë ˆì½”ë“œ ìë™ ì •ë¦¬ (30ì¼ í›„)
- íŠ¸ëœì­ì…˜ì„ í†µí•œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥

### ë„ë©”ì¸ ëª¨ë¸ë§
- Immutable ì—”í‹°í‹° ì„¤ê³„
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì—”í‹°í‹°ì— ìº¡ìŠí™”
- ìŠ¤ì¼€ì¤„ íƒ€ì…ë³„ í™œì„±í™” ë¡œì§ êµ¬í˜„

### ì—ëŸ¬ ì²˜ë¦¬
- ëª…í™•í•œ ì˜ˆì™¸ ë©”ì‹œì§€
- Repository ë ˆë²¨ì—ì„œ ì—ëŸ¬ ë˜í•‘
- Null safety ì™„ë²½ ì§€ì›

## ğŸ“Š ì„±ê³¼ ì§€í‘œ
- **ì½”ë“œ ë¼ì¸ ìˆ˜**: ì•½ 2,000ì¤„
- **íŒŒì¼ ìˆ˜**: 15ê°œ
- **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: ê¸°ë³¸ ëª¨ë¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- **ë¹Œë“œ ì‹œê°„**: < 5ì´ˆ
- **í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„**: < 5ì´ˆ

## ğŸ› í•´ê²°ëœ ì´ìŠˆ
1. **Dart ì–¸ì–´ ê·œì¹™**: Required ë§¤ê°œë³€ìˆ˜ë¥¼ optional ë§¤ê°œë³€ìˆ˜ ì•ì— ë°°ì¹˜
2. **ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ë³€ìˆ˜**: ë¶ˆí•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì œê±°
3. **Import ëˆ„ë½**: ScheduleType import ì¶”ê°€

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ (Phase 2)
1. **í™ˆ í™”ë©´ UI êµ¬í˜„**
   - ë£¨í‹´ ëª©ë¡ í‘œì‹œ
   - í”Œë¡œíŒ… ì•¡ì…˜ ë²„íŠ¼
   - ë¹ˆ ìƒíƒœ í™”ë©´

2. **ë£¨í‹´ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸**
   - ì•„ì´ì½˜ ë° ìƒ‰ìƒ í‘œì‹œ
   - ì²´í¬ ì• ë‹ˆë©”ì´ì…˜
   - ìŠ¤ì™€ì´í”„ ì‚­ì œ

3. **ë£¨í‹´ ì¶”ê°€/ìˆ˜ì • í™”ë©´**
   - í¼ ìœ íš¨ì„± ê²€ì‚¬
   - ì•„ì´ì½˜/ìƒ‰ìƒ ì„ íƒê¸°
   - ìŠ¤ì¼€ì¤„ ì„¤ì •

4. **ìƒíƒœ ê´€ë¦¬ ì„¤ì •**
   - Riverpod Provider êµ¬í˜„
   - ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™

## ğŸ“ ì¶”ê°€ ë©”ëª¨

### ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ ì´ìœ  (SQLite)
- ë³µì¡í•œ ì¿¼ë¦¬ ì§€ì› (í†µê³„, í•„í„°ë§)
- íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë°ì´í„° ë¬´ê²°ì„± ë³´ì¥
- ê´€ê³„í˜• êµ¬ì¡°ë¡œ í™•ì¥ì„± í™•ë³´
- í–¥í›„ ì„œë²„ ë™ê¸°í™” ìš©ì´

### Clean Architecture ì¥ì 
- í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
- ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë…ë¦½ì„±
- í”„ë ˆì„ì›Œí¬ êµì²´ ê°€ëŠ¥

### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
- ì¸ë±ìŠ¤ ìµœì í™” ì™„ë£Œ
- ìŠ¤íŠ¸ë¦¼ ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- ë°°ì¹˜ ì‘ì—… ì§€ì›
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ì¿¼ë¦¬

---

*ì‘ì—… ì™„ë£Œ: 2025.10.18 16:30*