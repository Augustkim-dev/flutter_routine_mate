# 005. Phase 2: 핵심 UI 및 루틴 관리 기능

## 📋 작업 개요
**목표**: 메인 화면 UI 구현 및 루틴 CRUD 기능 완성
**예상 기간**: 3일
**우선순위**: P0 (필수)

## 🎯 작업 목표
1. 홈 화면 레이아웃 구현
2. 루틴 카드 컴포넌트 개발
3. 루틴 추가/수정/삭제 UI 구현
4. 애니메이션 및 인터랙션 추가
5. 테마 및 디자인 시스템 구축

## 📂 생성할 파일 구조
```
lib/
├── core/
│   ├── theme/
│   │   ├── app_colors.dart
│   │   ├── app_theme.dart
│   │   ├── app_text_styles.dart
│   │   └── app_icons.dart
│   └── widgets/
│       ├── app_bottom_sheet.dart
│       ├── app_button.dart
│       └── app_empty_state.dart
└── features/
    └── routine/
        └── presentation/
            ├── screens/
            │   ├── home_screen.dart
            │   └── routine_form_screen.dart
            ├── widgets/
            │   ├── routine_card.dart
            │   ├── routine_list.dart
            │   ├── routine_form.dart
            │   ├── schedule_selector.dart
            │   ├── icon_selector.dart
            │   ├── color_selector.dart
            │   ├── completion_indicator.dart
            │   └── streak_badge.dart
            └── animations/
                ├── check_animation.dart
                ├── slide_animation.dart
                └── fade_animation.dart
```

## 🔧 상세 구현 계획

### 1. 테마 시스템
```dart
// app_colors.dart
class AppColors {
  static const primaryIndigo = Color(0xFF6366F1);
  static const routineColors = [
    indigo, blue, green, yellow,
    orange, red, pink, purple
  ];
}

// app_theme.dart
- Light/Dark 테마 정의
- Material 3 Design System
- 커스텀 ColorScheme
- 반응형 Typography
```

### 2. 홈 화면 (home_screen.dart)
```dart
주요 구성요소:
- AppBar (타이틀, 설정 버튼)
- 오늘의 진행률 표시
- 루틴 리스트 (ListView.builder)
- FloatingActionButton
- Empty State (루틴 없을 때)

기능:
- Pull to Refresh
- 스크롤 시 FAB 숨김/표시
- 오늘/전체 필터 토글
```

### 3. 루틴 카드 (routine_card.dart)
```dart
구성요소:
- 아이콘 (30개 프리셋)
- 루틴명
- 체크 인디케이터
- 스트릭 뱃지 (선택)

상태:
- Unchecked: opacity 0.1 배경
- Checked: opacity 0.2 배경 + 체크 아이콘
- Disabled: 어제 루틴 (회색 처리)

인터랙션:
- Tap: 체크 토글 + Haptic feedback
- Long Press: 컨텍스트 메뉴
- Swipe Left: 삭제 액션
```

### 4. 루틴 추가/수정 바텀시트
```dart
// routine_form.dart
필드:
1. 루틴명 입력 (TextField)
   - 20자 제한
   - 실시간 글자수 표시

2. 아이콘 선택 (GridView)
   - 6x5 그리드
   - 카테고리별 구분

3. 색상 선택 (Row)
   - 8개 색상 칩
   - 선택 시 애니메이션

4. 요일 설정 (SegmentedButton)
   - 매일/평일/주말/커스텀
   - 커스텀 시 요일 선택 UI

버튼:
- 취소 (텍스트 버튼)
- 추가/저장 (Filled 버튼)
```

### 5. 애니메이션
```dart
// check_animation.dart
- Scale + Fade 조합
- Duration: 250ms
- Curve: easeOutBack

// slide_animation.dart
- Dismissible 위젯 활용
- 스와이프 임계값: 0.3
- 삭제 배경: 빨간색

// fade_animation.dart
- 루틴 추가 시 FadeIn
- Duration: 300ms
```

### 6. 인터랙션 디테일
```dart
// Haptic Feedback
- Light impact: 체크/언체크
- Medium impact: 삭제
- Selection feedback: 아이콘/색상 선택

// Visual Feedback
- Ripple effect: 모든 탭 가능 영역
- Elevation 변화: 카드 press 시
- Color transition: 상태 변경 시
```

## 🎨 디자인 가이드라인

### 색상 팔레트
- Primary: #6366F1 (Indigo)
- Surface: #FFFFFF (Light) / #1E1E1E (Dark)
- OnSurface: #1A1A1A / #FFFFFF
- Error: #DC2626
- Success: #10B981

### 스페이싱
- 화면 패딩: 16dp
- 카드 간격: 12dp
- 카드 내부 패딩: 16dp
- 아이콘 크기: 24dp
- FAB 크기: 56dp

### 타이포그래피
- 제목: 24sp, Bold
- 루틴명: 16sp, Medium
- 보조 텍스트: 14sp, Regular
- 캡션: 12sp, Regular

## 🧪 테스트 계획
1. **Widget 테스트**
   - 루틴 카드 렌더링
   - 체크 상태 변경
   - 폼 유효성 검증

2. **Golden 테스트**
   - 다크모드 스크린샷
   - 다양한 상태 스크린샷

3. **통합 테스트**
   - 루틴 추가 플로우
   - 스와이프 삭제
   - 수정 플로우

## ⚠️ 주의사항
1. **성능 최적화**
   - const 생성자 활용
   - ListView.builder 사용
   - 불필요한 rebuild 방지

2. **접근성**
   - 모든 interactive 요소에 Semantics
   - 최소 터치 영역 48x48dp
   - 색상 대비율 WCAG AA 준수

3. **반응형 디자인**
   - 다양한 화면 크기 대응
   - 가로 모드 지원
   - 텍스트 스케일링 대응

## 🎯 완료 기준
- [ ] 홈 화면 정상 렌더링
- [ ] 루틴 CRUD 모든 기능 동작
- [ ] 애니메이션 부드러운 동작 (60fps)
- [ ] 다크모드 완벽 지원
- [ ] Haptic feedback 구현

## 📝 다음 단계
Phase 3: 상태 관리 및 데이터 연동으로 진행